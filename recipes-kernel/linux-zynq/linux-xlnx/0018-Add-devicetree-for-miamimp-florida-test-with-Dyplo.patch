From a85e3551211cef4e5de6afede79993f56221de88 Mon Sep 17 00:00:00 2001
From: Niek van Agt <niek.van.agt@topic.nl>
Date: Mon, 17 Jun 2019 17:12:00 +0200
Subject: [PATCH] Add devicetree for miamimp-florida-test with Dyplo

---
 arch/arm64/boot/dts/xilinx/dyplo.dtsi              | 12 ++++++++++++
 .../boot/dts/xilinx/zynqmp-topic-miamimp-dyplo.dts | 14 ++++++++++++++
 2 files changed, 26 insertions(+)
 create mode 100644 arch/arm64/boot/dts/xilinx/dyplo.dtsi
 create mode 100644 arch/arm64/boot/dts/xilinx/zynqmp-topic-miamimp-dyplo.dts

diff --git a/arch/arm64/boot/dts/xilinx/dyplo.dtsi b/arch/arm64/boot/dts/xilinx/dyplo.dtsi
new file mode 100644
index 000000000000..2a2865ebc6aa
--- /dev/null
+++ b/arch/arm64/boot/dts/xilinx/dyplo.dtsi
@@ -0,0 +1,12 @@
+/* DTS snippet to add DYPLO to the kernel configuration. This assumes
+ * a default configuration of IRQ 89 and address 0xA0000000 */
+&amba {
+	dyplo: dyplo@A0000000 {
+		compatible = "topic,dyplo-1.00.a";
+		reg = <0x0 0xA0000000 0x0 0x200000>;
+		interrupt-parent = <&gic>;
+		interrupts = <0 89 4>; /* pl_ps_0[0] */
+		nvmem-cells = <&dyplolicense>;
+		nvmem-cell-names = "license";
+	};
+};
diff --git a/arch/arm64/boot/dts/xilinx/zynqmp-topic-miamimp-dyplo.dts b/arch/arm64/boot/dts/xilinx/zynqmp-topic-miamimp-dyplo.dts
new file mode 100644
index 000000000000..db74c81d9964
--- /dev/null
+++ b/arch/arm64/boot/dts/xilinx/zynqmp-topic-miamimp-dyplo.dts
@@ -0,0 +1,14 @@
+/*
+ * dts file for Topic Miami MPSoC with Dyplo in the FPGA
+ *
+ * (C) Copyright 2017, Topic Embedded Products BV
+ * Niek van Agt <niek.van.agt@topic.nl>
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License as
+ * published by the Free Software Foundation; either version 2 of
+ * the License, or (at your option) any later version.
+ */
+
+#include "zynqmp-topic-miamimp-florida-test.dts"
+#include "dyplo.dtsi"
-- 
2.17.1

